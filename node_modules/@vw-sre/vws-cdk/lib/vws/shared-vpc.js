"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.SharedVpc = void 0;
const aws_cdk_lib_1 = require("aws-cdk-lib");
const aws_ec2_1 = require("aws-cdk-lib/aws-ec2");
const generated_1 = require("../generated");
class SharedVpc extends aws_cdk_lib_1.Resource {
    constructor(scope, id, props) {
        var _a;
        super(scope, id, props);
        const resource = new generated_1.CfnShared(this, 'Resource', {});
        this.vpc = SharedVpc.from(resource, (_a = props === null || props === void 0 ? void 0 : props.availabilityZones) !== null && _a !== void 0 ? _a : this.stack.availabilityZones);
    }
    static from(sharedVpc, availabilityZones) {
        let subnetIds = [];
        availabilityZones.forEach((_, index) => {
            subnetIds.push(aws_cdk_lib_1.Fn.select(index, sharedVpc.attrSubnets));
        });
        return aws_ec2_1.Vpc.fromVpcAttributes(sharedVpc, `${sharedVpc.attrId}-Vpc`, {
            vpcId: sharedVpc.attrVpcId,
            availabilityZones: availabilityZones,
            isolatedSubnetIds: subnetIds,
        });
    }
}
exports.SharedVpc = SharedVpc;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2hhcmVkLXZwYy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInNoYXJlZC12cGMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQUEsNkNBQTBEO0FBQzFELGlEQUFnRDtBQUVoRCw0Q0FBeUM7QUFNekMsTUFBYSxTQUFVLFNBQVEsc0JBQVE7SUFpQnJDLFlBQVksS0FBZ0IsRUFBRSxFQUFVLEVBQUUsS0FBc0I7O1FBQzlELEtBQUssQ0FBQyxLQUFLLEVBQUUsRUFBRSxFQUFFLEtBQUssQ0FBQyxDQUFDO1FBRXhCLE1BQU0sUUFBUSxHQUFHLElBQUkscUJBQVMsQ0FBQyxJQUFJLEVBQUUsVUFBVSxFQUFFLEVBQUUsQ0FBQyxDQUFDO1FBQ3JELElBQUksQ0FBQyxHQUFHLEdBQUcsU0FBUyxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsTUFBQSxLQUFLLGFBQUwsS0FBSyx1QkFBTCxLQUFLLENBQUUsaUJBQWlCLG1DQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsaUJBQWlCLENBQUMsQ0FBQztJQUNoRyxDQUFDO0lBcEJNLE1BQU0sQ0FBQyxJQUFJLENBQUMsU0FBb0IsRUFBRSxpQkFBMkI7UUFDbEUsSUFBSSxTQUFTLEdBQWEsRUFBRSxDQUFDO1FBQzdCLGlCQUFpQixDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxLQUFLLEVBQUUsRUFBRTtZQUNyQyxTQUFTLENBQUMsSUFBSSxDQUFDLGdCQUFFLENBQUMsTUFBTSxDQUFDLEtBQUssRUFBRSxTQUFTLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQztRQUMxRCxDQUFDLENBQUMsQ0FBQztRQUVILE9BQU8sYUFBRyxDQUFDLGlCQUFpQixDQUFDLFNBQVMsRUFBRSxHQUFHLFNBQVMsQ0FBQyxNQUFNLE1BQU0sRUFBRTtZQUNqRSxLQUFLLEVBQUUsU0FBUyxDQUFDLFNBQVM7WUFDMUIsaUJBQWlCLEVBQUUsaUJBQWlCO1lBQ3BDLGlCQUFpQixFQUFFLFNBQVM7U0FDN0IsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztDQVdGO0FBeEJELDhCQXdCQyJ9