"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.BootstraplessSynthesizer = void 0;
const aws_cdk_lib_1 = require("aws-cdk-lib");
/**
 * Synthesizer to deploy a stack in a non-bootstrapped environment.
 *
 * A common finding when using CDK is the usage of the AdministratorAccess policy.
 * One way to avoid using it is to provide `--cloudformation-execution-policies`.
 * Using AWS managed policies is not always wanted.
 *
 * This synthesizer provides a workaround for https://github.com/aws/aws-cdk/issues/16888
 */
class BootstraplessSynthesizer extends aws_cdk_lib_1.DefaultStackSynthesizer {
    synthesize(session) {
        this.synthesizeStackTemplate(this.stack, session);
        this.emitStackArtifact(this.stack, session, {
            assumeRoleArn: undefined,
            cloudFormationExecutionRoleArn: undefined,
        });
    }
}
exports.BootstraplessSynthesizer = BootstraplessSynthesizer;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYm9vdHN0cmFwbGVzcy1zeW50aGVzaXplci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImJvb3RzdHJhcGxlc3Mtc3ludGhlc2l6ZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQUEsNkNBQXlFO0FBRXpFOzs7Ozs7OztHQVFHO0FBQ0gsTUFBYSx3QkFBeUIsU0FBUSxxQ0FBdUI7SUFDNUQsVUFBVSxDQUFDLE9BQTBCO1FBQzFDLElBQUksQ0FBQyx1QkFBdUIsQ0FBQyxJQUFJLENBQUMsS0FBTSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBRW5ELElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsS0FBTSxFQUFFLE9BQU8sRUFBRTtZQUMzQyxhQUFhLEVBQUUsU0FBUztZQUN4Qiw4QkFBOEIsRUFBRSxTQUFTO1NBQzFDLENBQUMsQ0FBQztJQUNMLENBQUM7Q0FDRjtBQVRELDREQVNDIn0=