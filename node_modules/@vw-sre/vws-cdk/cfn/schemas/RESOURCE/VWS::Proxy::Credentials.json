{
  "typeName": "VWS::Proxy::Credentials",
  "description": "Provides credentials for the VWS proxy service.",
  "sourceUrl": "https://github.com/vwvws/vws-cfn-proxy-credentials-resource",
  "definitions": {},
  "properties": {
    "Instance": {
      "description": "proxy instance id",
      "type": "string",
      "pattern": "^(production#|sandbox#)?[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$"
    },
    "Principals": {
      "description": "list of AWS principals (ARNs) allowed to access the proxy credential",
      "type": "array",
      "items": {
        "type": "string",
        "pattern": "^arn:aws:iam::[0-9]{12}:[A-Za-z0-9:\\/-]*$"
      },
      "minItems": 1
    },
    "Id": {
      "description": "proxy credential id",
      "type": "string",
      "pattern": "^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$"
    },
    "SecretArn": {
      "description": "AWS SecretsManager Arn for the secret containing the proxy password",
      "type": "string",
      "pattern": "^arn:aws:secretsmanager:[a-z0-9\\-]+:secret:[0-9]{12}:[A-Za-z0-9:\\/-]*$"
    },
    "KmsKeyArn": {
      "description": "AWS SecretsManager Arn for the secret containing the proxy password",
      "type": "string",
      "pattern": "^arn:aws:kms:[a-z0-9\\-]+:[0-9]{12}:key/[A-Za-z0-9:\\/-]*$"
    },
    "Environment": {
      "description": "internal property for test and debug purposes",
      "type": "string",
      "pattern": "^production|sandbox$"
    }
  },
  "additionalProperties": false,
  "required": [
    "Instance",
    "Principals"
  ],
  "readOnlyProperties": [
    "/properties/Id",
    "/properties/SecretArn",
    "/properties/KmsKeyArn"
  ],
  "writeOnlyProperties": [
    "/properties/Instance",
    "/properties/Principals",
    "/properties/Environment"
  ],
  "createOnlyProperties": [
    "/properties/Instance",
    "/properties/Principals",
    "/properties/Environment"
  ],
  "primaryIdentifier": [
    "/properties/Id"
  ],
  "handlers": {
    "create": {
      "permissions": [
        "execute-api:Invoke"
      ]
    },
    "read": {
      "permissions": [
        "execute-api:Invoke"
      ]
    },
    "delete": {
      "permissions": [
        "execute-api:Invoke"
      ]
    }
  }
}
