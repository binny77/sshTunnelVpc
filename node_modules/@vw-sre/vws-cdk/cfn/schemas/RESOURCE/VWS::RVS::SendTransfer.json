{
  "typeName": "VWS::RVS::SendTransfer",
  "description": "Creates a transfer of objects from a S3 bucket via RVS.",
  "sourceUrl": "https://github.com/vwvws/vws-aws-rvs",
  "definitions": {},
  "properties": {
    "Id": {
      "description": "unique ID of the send transfer",
      "type": "string"
    },
    "EventBusArn": {
      "description": "The Amazon Resource Name (ARN) of the EventBridge Event Bus where to forward S3 events to.",
      "type": "string"
    },
    "Source": {
      "type": "object",
      "description": "The location of the source objects to send via RVS.",
      "properties": {
        "S3BucketName": {
          "description": "The name of the Amazon S3 bucket.",
          "type": "string"
        },
        "S3ObjectKey": {
          "description": "The key of the object to send with RVS.",
          "type": "string"
        },
        "RoleArn": {
          "type": "string",
          "description": "The Amazon Resource Name (ARN) of a role to assume that can read from the source.",
          "pattern": "arn:aws(-[\\w]+)*:iam::[0-9]{12}:role/.*"
        }
      },
      "required": [
        "S3BucketName",
        "S3ObjectKey",
        "RoleArn"
      ],
      "additionalProperties": false
    },
    "Record": {
      "type": "object",
      "description": "Record properties for the send job.",
      "properties": {
        "Format": {
          "type": "string",
          "description": "Format of the transferred file.",
          "enum": [
            "TEXT",
            "FIXED",
            "VARIABLE",
            "UNSTRUCTURED"
          ]
        },
        "Mode": {
          "type": "string",
          "description": "Specifies if the transferred file is a text file or a binary file. Only valid for format FIXED or VARIABLE.",
          "enum": [
            "TXT",
            "BIN"
          ]
        },
        "Length": {
          "type": "number",
          "description": "The maximal sentence length. Required for FIXED Format."
        }
      },
      "additionalProperties": false
    },
    "Transfer": {
      "type": "object",
      "description": "Specifies the RVS transfer parameter.",
      "properties": {
        "VDSN": {
          "type": "string",
          "description": "The virtual data set name (filename) used in the RVS transfer. The VDSN must be unique and must not be used in another Receive Rule. The VDSN also specifies to what station the transfer will be delivered to.",
          "pattern": "^[QED][A-Z0-9]{2}\\.[A-Z0-9]{6}\\.[.\\-\\/()&A-Z0-9]{1,15}$"
        }
      },
      "required": [
        "VDSN"
      ],
      "additionalProperties": false
    },
    "CharsetConversion": {
      "type": "string",
      "description": "Charset conversion that should be applied before sending the transfer.",
      "enum": [
        "ANSI-IBM037",
        "ANSI-IBM273",
        "ASCII-IBM037",
        "ASCII-IBM273",
        "ASCII-IBM500",
        "IBM037-ANSI",
        "IBM037-ASCII",
        "IBM273-ANSI",
        "IBM273-ASCII",
        "IBM500-ASCII"
      ]
    },
    "Encryption": {
      "type": "string",
      "description": "Enable encrypted transfer to the target RVS station. The encryption is end-to-end in the RVS OFTP2 protocol and requires the receiving station to have OFTP2 and encryption support.",
      "enum": [
        "DISABLED",
        "ENABLED"
      ],
      "default": "ENABLED"
    }
  },
  "additionalProperties": false,
  "required": [
    "Source",
    "Transfer"
  ],
  "readOnlyProperties": [
    "/properties/Id",
    "/properties/EventBusArn"
  ],
  "createOnlyProperties": [
    "/properties/Transfer/VDSN"
  ],
  "primaryIdentifier": [
    "/properties/Id"
  ],
  "handlers": {
    "create": {
      "permissions": [
        "execute-api:Invoke"
      ]
    },
    "read": {
      "permissions": [
        "execute-api:Invoke"
      ]
    },
    "update": {
      "permissions": [
        "execute-api:Invoke"
      ]
    },
    "delete": {
      "permissions": [
        "execute-api:Invoke"
      ]
    }
  }
}
